{"version":3,"file":"js/16.1dd38dcb.js","mappings":"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","sources":["webpack://sales-tnp-vue/./src/pages/LoginComponent.vue","webpack://sales-tnp-vue/./src/pages/LoginComponent.vue?d360"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <div class=\"login-container__asside\"></div>\r\n    <div class=\"login-container__body\">\r\n      <div class=\"title-container\">\r\n        <h2>Авторизация</h2>\r\n        <v-progress-circular\r\n            color=\"green\"\r\n            indeterminate\r\n            v-if=\"isShowAuthLoader\"\r\n        ></v-progress-circular>\r\n\r\n      </div>\r\n      <div class=\"input-data\">\r\n        <v-text-field class=\"input-data__login\"\r\n                      v-model=\"login\"\r\n                      :rules=\"loginRules\"\r\n                      hide-details=\"auto\"\r\n                      label=\"Ваш логин\"\r\n        ></v-text-field>\r\n        <div class=\"show-hide-password\">\r\n          <v-text-field class=\"input-data__password\"\r\n                        v-model=\"password\"\r\n                        :rules=\"passwordRules\"\r\n                        hide-details=\"auto\"\r\n                        label=\"Ваш пароль\"\r\n                        :type=\"showPassword ? 'text' : 'password'\"\r\n          ></v-text-field>\r\n          <v-icon v-if=\"showPassword\" class=\"input-data__password-icon\" @click=\"togglePasswordVisibility\">mdi-eye\r\n          </v-icon>\r\n          <v-icon v-if=\"!showPassword\" class=\"input-data__password-icon\" @click=\"togglePasswordVisibility\">mdi-eye-off\r\n          </v-icon>\r\n        </div>\r\n      </div>\r\n      <v-btn\r\n          :disabled=\"!availableConfirmBtn\"\r\n          block\r\n          class=\"confirm-btn\"\r\n          @click=\"checkAuth\">\r\n        Войти\r\n      </v-btn>\r\n    </div>\r\n  </div>\r\n  <div class=\"text-center\">\r\n    <v-snackbar\r\n        v-model=\"snackbar\"\r\n        multi-line\r\n        timeout=\"3000\"\r\n        style=\"margin-bottom: 60px\"\r\n    >\r\n      {{ snackbarText }}\r\n\r\n      <template v-slot:actions>\r\n        <v-btn\r\n            color=\"red\"\r\n            variant=\"text\"\r\n            @click=\"snackbar = false\"\r\n        >\r\n          Close\r\n        </v-btn>\r\n      </template>\r\n    </v-snackbar>\r\n  </div>\r\n  <div class=\"text-center\">\r\n    <v-dialog\r\n        v-model=\"dialog\"\r\n        max-width=\"400\"\r\n        persistent\r\n    >\r\n\r\n      <v-card\r\n          prepend-icon=\"mdi-information\"\r\n          :text=\"dialogText\"\r\n          :title=\"dialogTitle\"\r\n      >\r\n        <template v-slot:actions>\r\n          <v-spacer></v-spacer>\r\n\r\n          <v-btn @click=\"dialog = false\" color=\"red\">\r\n            Закрыть\r\n          </v-btn>\r\n        </template>\r\n      </v-card>\r\n    </v-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\";\r\n\r\nexport default {\r\n  name: \"LoginComponent\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      dialog: false,\r\n      login: '',\r\n      password: '',\r\n      checkRegEx: {log: false, pass: false},\r\n      availableConfirmBtn: false,\r\n      loginRules: [\r\n        value => !!value || 'Требуется логин.',\r\n        value => (value && value.length >= 3) || 'Логин должен содержать минимум 3 символа',\r\n        value => this.validateLogin(value) || 'Логин должен быть в формате \"*.*******\"'\r\n      ],\r\n      passwordRules: [\r\n        value => !!value || 'Требуется пароль.',\r\n        value => (value && value.length >= 3) || 'Пароль должен содержать минимум 3 символа',\r\n        value => this.validateEmail(value) || 'Подсказка: пароль должен содержать @'\r\n      ],\r\n      dialogText: '',\r\n      dialogTitle: '',\r\n      isShowAuthLoader: false,\r\n      snackbar: false,\r\n      snackbarText: '',\r\n      showPassword: false,\r\n    }\r\n  },\r\n  methods: {\r\n    togglePasswordVisibility() {\r\n      this.showPassword = !this.showPassword;\r\n    },\r\n    handleEnter(event) {\r\n      if (event.key === 'Enter' && this.availableConfirmBtn) {\r\n        this.checkAuth();\r\n      }\r\n    },\r\n    validateLogin(value) {\r\n      const regex = /^[a-zA-Z]\\.[a-zA-Z]+$/;\r\n      this.checkRegEx.log = regex.test(value);\r\n      return regex.test(value);\r\n    },\r\n    validateEmail(value) {\r\n      const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n      this.checkRegEx.pass = regex.test(value);\r\n      return regex.test(value);\r\n    },\r\n    async checkAuth() {\r\n      this.availableConfirmBtn = false;\r\n      this.isShowAuthLoader = true;\r\n      let isLoginActual = null;\r\n\r\n      await $.ajax({\r\n        url: 'https://script.google.com/macros/s/AKfycbzlA3mS-tvOR0onR5y3seF1E8p7CwsUPuhxhKFGVKOf-btPNTqLGOv3V-vtg9c4LKJT5A/exec',\r\n        type: \"GET\",\r\n        crossDomain: true,\r\n        dataType: \"json\",\r\n        success: (response) => {\r\n          isLoginActual = response.stuff.filter(item => item.LoginName == this.login);\r\n          if (isLoginActual.length < 1) {\r\n            this.availableConfirmBtn = true;\r\n            this.isShowAuthLoader = false;\r\n            this.dialogTitle = 'Сотрудник не найден';\r\n            this.dialogText = 'Убедитесь, что вводите логин правильно';\r\n            this.dialog = true;\r\n          }\r\n          if (isLoginActual.length > 0) {\r\n            if (isLoginActual[0].PasswordEmail == this.password) {\r\n              let authObj = {login: isLoginActual[0].LoginName, role: isLoginActual[0].RoleStatus};\r\n\r\n              if (isLoginActual[0].RoleStatus == 'super' || isLoginActual[0].RoleStatus == 'manager') {\r\n                localStorage.setItem('sale-auth', JSON.stringify(authObj));\r\n                this.$emit('updateUserStatus', 'check');\r\n                this.$router.push('/');\r\n              }\r\n              if (isLoginActual[0].RoleStatus == 'promoter') {\r\n                localStorage.setItem('sale-auth', JSON.stringify(authObj));\r\n                this.$emit('updateUserStatus', 'check');\r\n                this.$router.push('/');\r\n              }\r\n            } else if (isLoginActual[0].PasswordEmail != this.password) {\r\n              this.dialogTitle = 'Неправильный пароль';\r\n              this.dialogText = 'Убедитесь, что вводите пароль правильно';\r\n              this.dialog = true;\r\n              this.availableConfirmBtn = true;\r\n              this.isShowAuthLoader = false;\r\n            }\r\n          }\r\n        },\r\n        error: (error) => {\r\n          console.log(error);\r\n          this.snackbarText = 'Ошибка загрузки данных с вервера, повторите попытку позже'\r\n          this.snackbar = true;\r\n          this.availableConfirmBtn = true;\r\n          this.isShowAuthLoader = false;\r\n        }\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    checkRegEx: {\r\n      handler(newVal) {\r\n        if (newVal.log && newVal.pass) {\r\n          this.availableConfirmBtn = true;\r\n        } else {\r\n          this.availableConfirmBtn = false;\r\n        }\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  mounted() {\r\n    document.addEventListener('keydown', this.handleEnter);\r\n  },\r\n  beforeUnmount() {\r\n    document.removeEventListener('keydown', this.handleEnter);\r\n    this.login = '';\r\n    this.password = '';\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.login-container {\r\n  max-width: 700px;\r\n  margin: 0 auto;\r\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\r\n  position: relative;\r\n  padding: 20px 45px 20px 20px;\r\n  overflow: hidden;\r\n  border-radius: 5px;\r\n  background-color: whitesmoke;\r\n\r\n  .login-container__asside {\r\n    position: absolute;\r\n    background-color: rgb(66, 133, 244);\r\n    width: 25px;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);\r\n  }\r\n\r\n  .login-container__body {\r\n    padding: 5px;\r\n\r\n    .title-container {\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      margin-bottom: 50px;\r\n\r\n      h2 {\r\n        text-align: left;\r\n        color: rgb(66, 133, 244);\r\n        letter-spacing: 1px;\r\n      }\r\n    }\r\n\r\n    .input-data {\r\n\r\n      .v-text-field {\r\n        background-color: white;\r\n      }\r\n\r\n      .input-data__login {\r\n        margin-bottom: 20px;\r\n      }\r\n\r\n      .show-hide-password {\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: center;\r\n        align-items: center;\r\n\r\n        .input-data__password {\r\n\r\n        }\r\n\r\n        .input-data__password-icon {\r\n          margin: 10px;\r\n          height: 100%;\r\n          background-color: whitesmoke;\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    .confirm-btn {\r\n      margin-top: 50px;\r\n      background-color: rgb(66, 133, 244);\r\n      color: white;\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./LoginComponent.vue?vue&type=template&id=1c41ea38&scoped=true\"\nimport script from \"./LoginComponent.vue?vue&type=script&lang=js\"\nexport * from \"./LoginComponent.vue?vue&type=script&lang=js\"\n\nimport \"./LoginComponent.vue?vue&type=style&index=0&id=1c41ea38&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1c41ea38\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","$data","isShowAuthLoader","_createBlock","_component_v_progress_circular","key","color","indeterminate","_createCommentVNode","_hoisted_4","_createVNode","_component_v_text_field","modelValue","login","_cache","$event","rules","loginRules","label","_hoisted_5","password","passwordRules","type","showPassword","_component_v_icon","onClick","$options","togglePasswordVisibility","default","_withCtx","_createTextVNode","_","_component_v_btn","disabled","availableConfirmBtn","block","checkAuth","_hoisted_6","_component_v_snackbar","snackbar","timeout","style","actions","variant","_toDisplayString","snackbarText","_hoisted_7","_component_v_dialog","dialog","persistent","_component_v_card","text","dialogText","title","dialogTitle","_component_v_spacer","name","components","data","checkRegEx","log","pass","value","length","this","validateLogin","validateEmail","methods","handleEnter","event","regex","test","isLoginActual","$","url","crossDomain","dataType","success","response","stuff","filter","item","LoginName","PasswordEmail","authObj","role","RoleStatus","localStorage","setItem","JSON","stringify","$emit","$router","push","error","console","watch","handler","newVal","deep","mounted","document","addEventListener","beforeUnmount","removeEventListener","__exports__","render"],"sourceRoot":""}